<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pola Gacor Batman</title>
<style>
  html, body {
    height: auto !important;
    overflow-y: auto !important;
  }

  header {
    position: relative !important;
  }

  .group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  @media (max-width: 768px) {
    .group {
      flex-direction: column;
      align-items: stretch;
    }

    .group input,
    .group select {
      width: 100%;
    }
  }

  :root{
    --bg:#13132a; --card:#1c1c3f; --muted:#8d90b3; --hi:#20c997; --mid:#ffc107; --low:#f03e3e;
    --accent:#6c5ce7;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
    background:linear-gradient(180deg,#0f1030 0%, #13132a 100%);
    color:#fff;
  }
  header{
    position:sticky; top:0; z-index:10; backdrop-filter: blur(6px);
    background:rgba(19,19,42,.75); border-bottom:1px solid rgba(255,255,255,.06);
  }
  .logo-circle {
    width: 240px;
    height: 240px;
    border-radius: 100%;
    object-fit: cover;
  }
  .wrap{max-width:1200px; margin:0 auto; padding:14px 16px;}
  h1{margin:0 0 8px;font-size:20px; font-weight:700; letter-spacing:.2px}
  .toolbar{
    display:flex; gap:10px; flex-wrap:wrap; align-items:center;
  }
  .toolbar > div {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  input[type="search"], select{
    background:#0f1030; border:1px solid rgba(255,255,255,.12); color:#fff;
    padding:10px 12px; border-radius:10px; outline:none; min-width:220px;
  }
  .btn{
    background:var(--accent); border:none; color:#fff; padding:10px 14px; border-radius:12px;
    cursor:pointer; font-weight:600; box-shadow:0 6px 16px rgba(108,92,231,.35);
  }
  .btn:disabled{opacity:.6; cursor:not-allowed; box-shadow:none}
  .meta{margin-left:auto; color:var(--muted); font-size:12px}
  .grid{
    max-width:1200px; margin:14px auto; padding:8px 16px 32px;
    display:grid; gap:16px;
    grid-template-columns:repeat(auto-fill, minmax(160px,1fr));
  }
  .card{
    position:relative; background:var(--card); border:1px solid rgba(255,255,255,.06);
    border-radius:16px; overflow:hidden; box-shadow:0 6px 20px rgba(0,0,0,.25);
    padding:10px;
    transition:transform .15s ease, box-shadow .15s ease;
  }
  .card:hover{transform:translateY(-2px); box-shadow:0 10px 28px rgba(0,0,0,.35)}
  .thumb{width:100%; aspect-ratio:1/1; object-fit:cover; display:block; border-radius:12px;}
  .title{
    font-size:14px; font-weight:700; margin:8px 0 4px; color:#e8e9ff;
  }
  .provider{
    font-size:12px; color:var(--muted); margin-bottom:6px;
  }
  .bar {
    position:relative;
    height:16px;
    background:rgba(255,255,255,.08);
    border-radius:6px;
    overflow:hidden;
  }
  .bar .fill {
    position:absolute;
    top:0;
    left:0;
    height:100%;
    display:block;
    z-index:0;
  }
  .bar .label {
    position:absolute;
    width:100%;
    text-align:center;
    font-size:12px;
    font-weight:700;
    color:#fff;
    text-shadow:0 0 3px rgba(0,0,0,.8);
    z-index:1;
  }
  .status{
    text-align:center; color:var(--muted); padding:40px 16px; font-size:14px;
  }
  .hide{display:none}
  .legend{display:flex; gap:8px; align-items:center; font-size:12px; color:var(--muted)}
  .dot{width:10px; height:10px; border-radius:50%}
  .dot.hi{background:var(--hi)} .dot.mid{background:var(--mid)} .dot.low{background:var(--low)}
</style>
</head>
<body>
  <header>
    <div class="wrap">
      <div id="logo-container" style="text-align:center; margin: 10px 0;">
      <a href="https://bit.ly/m/batmangacoy" target="_blank">
        <img src="Gambar RTP/Batmangacoy.png" alt="AVENGERS" class="logo-circle">
      </a>
      </div>
      <div id="other-logos" style="text-align:center; margin: 20px 0;">
  <a href="https://ayoklik.me/bos88a" target="_blank">
    <img src="Gambar RTP/Bos88.png" alt="BOS88" style="max-height:50px; margin:10px;">
  </a>

  <a href="https://ayoklik.me/bro138a" target="_blank">
    <img src="Gambar RTP/Bro138.png" alt="BRO138" style="max-height:50px; margin:10px;">
  </a>

  <a href="https://ayoklik.me/batman138a" target="_blank">
    <img src="Gambar RTP/Batman138.png" alt="BATMAN138" style="max-height:50px; margin:10px;">
  </a>

  <a href="https://ayoklik.me/luxury333a" target="_blank">
    <img src="Gambar RTP/Luxury333.png" alt="LUXURY333" style="max-height:50px; margin:10px;">
  </a>

  <a href="https://ayoklik.me/qqmacan1" target="_blank">
    <img src="Gambar RTP/QQMacan.png" alt="QQMACAN" style="max-height:50px; margin:10px;">
  </a>       
        
  <a href="https://ayoklik.me/luxury12a" target="_blank">
    <img src="Gambar RTP/Luxury12.png" alt="LUXURY12" style="max-height:50px; margin:10px;">
  </a>

</div>
      <h1>RTP Live – Dashboard</h1>
      <div class="toolbar">
        <div>
          <input id="search" type="search" placeholder="Cari game…" />
          <select id="range">
              <option value="high">RTP Tertinggi</option>
              <option value="low">RTP Terendah</option>
            </select>
          <select id="provider">
            <option value="all">Semua Provider</option>
          </select>
        </div>

        <div class="legend">
          <span class="dot hi"></span> Tinggi
          <span class="dot mid" style="margin-left:8px"></span> Sedang
          <span class="dot low" style="margin-left:8px"></span> Rendah
        </div>
      </div>
    </div>
  </header>
  
  <div id="status" class="status">Memuat data…</div>
  <div id="grid" class="grid hide"></div>

<script>
  const $grid   = document.getElementById('grid');
  const $status = document.getElementById('status');
  const $meta   = document.getElementById('meta');
  const $search = document.getElementById('search');
  const $range  = document.getElementById('range');
  const $prov   = document.getElementById('provider');
  let DATA = [];

  const fmtTime = d => new Intl.DateTimeFormat('id-ID',{
    hour:'2-digit',minute:'2-digit',second:'2-digit',day:'2-digit',month:'short'
  }).format(d);

  function mockFetch(){
    return new Promise(res=>setTimeout(()=>res({ok:true,json:()=>Promise.resolve(items)}), 600));
  }

async function fetchRTP() {
  try {
    // Memanggil data.json
    const response = await fetch('data.json');
    
    // Mengubah response menjadi JSON
    const data = await response.json();

    // Pastikan 'data' digunakan, bukan 'items'
    // Misal data.json berbentuk array
    data.forEach(item => {
      console.log(item); // tampilkan tiap item di console
    });

    // Jika ingin menyimpan ke variabel global atau memproses lebih lanjut
    window.items = data; // sekarang 'items' sudah terdefinisi
  } catch (err) {
    console.error('Gagal memanggil data.json:', err);
  }
}

  function render(){
    const q = ($search.value || '').toLowerCase();
    const range = $range.value;
    const prov = $prov.value;

    let items = DATA.filter(d => {
      const okName = d.nama.toLowerCase().includes(q);
      const okProv = prov==='all' || (d.provider||'Lainnya')===prov;
      return okName && okProv;
    });

    if(range === 'high'){
      items = items.sort((a,b) => b.rtp - a.rtp);
    } else if(range === 'low'){
      items = items.sort((a,b) => a.rtp - b.rtp);
    }

    if(items.length){
      $grid.innerHTML = items.map(d=>{
        let color;
        if (d.rtp >= 61) {
          color = 'var(--hi)';
        } else if (d.rtp >= 41) {
          color = 'var(--mid)';
        } else {
          color = 'var(--low)';
        }

        return `
          <article class="card">
            <img class="thumb" src="${d.gambar}" alt="${d.nama}" 
                 onerror="this.onerror=null;this.src='https://via.placeholder.com/200x200?text=No+Image'">
            <div class="title">${d.nama}</div>
            <div class="provider">${d.provider || 'Provider'}</div>
            <div class="bar">
              <span class="fill" style="width:${d.rtp}%;background:${color};"></span>
              <span class="label">${d.rtp}%</span>
            </div>
          </article>
        `;
      }).join('');

      $status.classList.add('hide');
    } else {
      $status.textContent = 'Tidak ada data.';
      $status.classList.remove('hide');
      $grid.innerHTML = '';
    }
  }

  [$search,$range,$prov].forEach(el=>el.addEventListener('input', render));

function scheduleReset() {
  const now = new Date();

  // Tentukan waktu reset berikutnya (12:00 siang atau 00:00 malam)
  let nextReset = new Date(now);
  if (now.getHours() < 12) {
    // Jika sekarang sebelum jam 12 siang → reset di jam 12:00 siang
    nextReset.setHours(12, 0, 0, 0);
  } else {
    // Jika sudah lewat jam 12 siang → reset di jam 00:00 (tengah malam)
    nextReset.setDate(nextReset.getDate() + 1);
    nextReset.setHours(0, 0, 0, 0);
  }

  const msUntilNext = nextReset.getTime() - now.getTime();

  console.log('Reset berikutnya pada:', nextReset.toLocaleString());

  // Jalankan fetch pertama kali saat waktu reset tercapai
  setTimeout(() => {
    fetchRTP();
    console.log('Reset otomatis dijalankan:', new Date().toLocaleString());

    // Setelah itu, reset ulang setiap 12 jam (12 siang & 12 malam)
    setInterval(() => {
      fetchRTP();
      console.log('Reset otomatis dijalankan:', new Date().toLocaleString());
    }, 12 * 60 * 60 * 1000);
  }, msUntilNext);
}

  fetchRTP();
  scheduleReset();
</script>
</body>
</html>

